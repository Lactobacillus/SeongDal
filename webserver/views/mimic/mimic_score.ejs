<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head %>
    <script type="text/javascript" src="http://svcapi.gigagenie.ai/sdk/v1.0/js/gigagenie.js"></script>
    <script type="text/javascript">
    var options={};
    // 서비스 초기화
    function init(){
        options={};
      options.keytype="GBOXDEVM"; // 개발(GBOXDEVM) 또는 상용(GBOXCOMM) 키 종류 입력
      options.apikey="RTUwMDE4OTN8R0JPWERFVk18MTUyODY5MTc4MzQ4Ng=="; // 개발자 포털에서 키를 발급받아 입력

      gigagenie.init(options,function(result_cd,result_msg,extra){
        if(result_cd===200){
            //init 성공
            console.log('헬로 지니 실행, Initialize Success');
            //함수 호출 및 개발 진행

            //callback 방식
            var options={};
            options.ttstext="성달 서비스를 시작합니다. 호출어를 부른 뒤 원하는 메뉴를 말씀해주세요.";
            gigagenie.voice.sendTTS(options,function(result_cd,result_msg,extra){
                if(result_cd===200){
                  //do next action
                } else {
                 //extra.reason 에 voice 오류 전달.
             };
            });
          };
      });

    }

    // 서비스 종료 명령 수신 API
    gigagenie.voice.onRequestClose=function(){
      options={};
      gigagenie.voice.svcFinished(options,function(result_cd,result_msg,extra){
      });
    };

    gigagenie.voice.onVoiceCommand=function(event){
      switch(event){
          case 'nextPage':
              //navigate next page
              break;
          case 'prevPage':
              //navigate prev page
              window.history.back();
              break;
          default:
              break;
      }
    };
    </script>
  </head>
  <body style="background: rgb(151, 192, 183);">
    <header>
      <% include ../partials/header %>
    </header>
    <div class="midnav">
      <img src="/images/seongdal.png" style="width: 10%; padding-left: 10px;">
      <div class="row">
        <div class="column">
          <div class="image-wrapper">
            <img src="/images/<%=script.image%>" style="border: solid white 5px;">
          </div>
        </div>
        <div class="column">
          <h1 style="color:white; text-align:center; margin-bottom: 10%; font-size: 40px;">당신의 성대모사 점수는</h1>
          <h1 style="color:white; text-align:center; margin-bottom: 10%; font-size: 60px;"><%=contact.score%>점</h1>
        </div>
        <div class="column" style="margin-top: 10%;">
          <div style="background: rgb(151, 192, 183); padding: 10px; border: solid rgb(65, 132, 143) 5px;">
            <a href="/practice_mimic/<%=script.id%>"><h1 style="text-align:center;">다시 하기</h1></a>
          </div>
        </div>
        <div class="column" style="margin-top: 10%; margin-bottom: 5%;">
          <div style="background: rgb(151, 192, 183); padding: 10px; border: solid rgb(65, 132, 143) 5px;">
            <a href="/save/<%=script.id%>/<%=filename%>"><h1 style="text-align:center;">저장하기</h1></a>
          </div>
        </div>
        <div class="column" style="max-width: 100%;">
          <div style="background: rgb(65, 132, 143); padding: 5px;">
            <h2 style="text-align:center; margin:0; color: white;">성달의 성대모사 분석 결과</h2>
          </div>
          <div style="background: rgb(151, 192, 183); padding: 10px; border: solid rgb(65, 132, 143) 5px;">
            <% var str = "" %>
            <% if (contact.pitch == 0) {str += "음높이가 적당하고, ";} else if (contact.pitch == 1) {str += "음높이가 낮고, ";} else if (contact.pitch == 2) {str += "음높이가 높고, ";} %>
            <% if (contact.length == 0) {str += "속도는 적당하고, ";} else if (contact.length == 1) {str += "속도는 빠르고, ";} else if (contact.length == 2) {str += "속도는 느리고, ";} %>
            <% if (contact.envelope == 0) {str += "세기도 적당해요!";} else if (contact.envelope == 1) {str += "세기가 적절하지 않아요!";} %>
            <h1 style="text-align:center;"><%= str %></h1>
          </div>
        </div>
      </div>
    </div>
 </body>
</html>
